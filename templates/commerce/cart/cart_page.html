{% extends "product/navbar_footer.html" %}
{% block content %}

<div class="bg-white border-b">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
        <div class="flex items-center space-x-2 text-sm">
            <a href="{% url 'home' %}" class="text-gray-500 hover:text-[#A89289]">Home</a>
            <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
            <span class="text-gray-900 font-medium">Shopping Cart</span>
        </div>
    </div>
</div>

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-4xl font-bold text-gray-800 mb-2">Shopping Cart</h1>
    <p class="text-gray-500">Review your items before checkout</p>
</div>

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16">
    
    <div class="lg:grid lg:grid-cols-12 lg:gap-x-12 lg:items-start">
        
        <section class="lg:col-span-8">
            <div id="cart-content">
                {% include "commerce/cart/_cart_content.html" %}
            </div>
        </section>
        {% if cart_items%}
        <section class="lg:col-span-4 mt-16 lg:mt-0">
            <div id="cart-totals"
                 class="bg-gray-50 rounded-lg px-4 py-6 sm:p-6 lg:p-8 sticky top-6 border border-gray-100"
                 hx-get="{% url 'cart_totals' %}"
                 hx-trigger="load, update-cart from:body"
                 hx-swap="innerHTML">
                 
                 <div class="animate-pulse space-y-4">
                    <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                    <div class="h-4 bg-gray-200 rounded"></div>
                    <div class="h-4 bg-gray-200 rounded w-1/2"></div>
                 </div>
            </div>
        </section>
{% endif %}
    </div>
</div>

<script>
    document.body.addEventListener("update-cart", function () {
        htmx.ajax('GET', "{% url 'cart_count' %}", {target: "#cart-badge", swap: "innerHTML"});
    });
</script>

{% endblock content %}
